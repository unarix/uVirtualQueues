@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

@section Scripts
{
    <script src="js/main.js"></script>
}

<div class="py-5 text-center">
    <h2>Habilite las notificaciones</h2>
</div>

  
<p>Welcome to the push messaging codelab. The button below needs to be fixed to support subscribing to push.</p>
<p>
    <button disabled class="js-push-btn mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
    Enable Push Messaging
    </button>
</p>
<section class="subscription-details js-subscription-details is-invisible">
    <p>Once you've subscribed your user, you'd send their subscription to your
    server to store in a database so that when you want to send a message
    you can lookup the subscription and send a message to it.</p>
    <p>To simplify things for this code lab copy the following details
    into the <a href="https://web-push-codelab.glitch.me/">Push Companion
    Site</a> and it'll send a push message for you, using the application
    server keys on the site - so make sure they match.</p>
    <pre><code class="js-subscription-json"></code></pre>
</section>

    <button id="prueba" onclick="probar();" >Probar</button>


<script>


function probar()
{
    var pushEndpoint = "eC8kA5lfrjc:APA91bHHHh3ikNWPa-614pz7FbWdPvCTn01OvkNuas6m-ilwP-U_VPHLd5QPsjL8W5G8gLquoTJd-jUVRDOziyXvxXoeY8ua2sRvt6GnG8WLpFdOkk7SI8_AxFZnlug4t9FOU7S-XjzH";
    var p256dh = "BAGGIn3MC7LZRCFKuRRSjA28bwQRP7mO_9AEr2l7ety-dtSn7Fcw11-aZu5UCOE0C2gVXVEaWkFLu7PWCR1ufGI";
    var auth = "VKMl5N1lJomQreFUjKlzeQ";

    var settings = {
            "url": "https://localhost:5001/api/webpush?pushEndpoint=" + pushEndpoint + "&p256dh=" + p256dh + "&auth=" + auth,
            "method": "POST",
            "timeout": 0,
            "headers": {
                    "Content-Type": "application/json"
            },
            "data": JSON.stringify({
                    query: "",
                    variables: {}
            })
    };

    $.ajax(settings).done(function (response) {
            console.log(response);
    });
}
</script>